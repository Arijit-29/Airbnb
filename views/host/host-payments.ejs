<!DOCTYPE html>
<html>
<head>
  <title>Complete Host Registration</title>
  <script src="https://checkout.razorpay.com/v1/checkout.js"></script>
</head>
<body>
  <h2>Redirecting to payment...</h2>
  <form id="payment-form" action="/host/payment/verify" method="POST">
    <input type="hidden" name="razorpay_order_id">
    <input type="hidden" name="razorpay_payment_id">
    <input type="hidden" name="razorpay_signature">
  </form>
  <script>
    const options = {
      key: "<%= key %>",                 
      amount: "<%= amount %>", 
      currency: "INR",
      order_id: "<%= orderId %>",
      name: "Airbnb Host Registration",
      description: "Host Registration Fee",
      handler: function (response) {
        document.querySelector('[name="razorpay_order_id"]').value =
          response.razorpay_order_id;
        document.querySelector('[name="razorpay_payment_id"]').value =
          response.razorpay_payment_id;
        document.querySelector('[name="razorpay_signature"]').value =
          response.razorpay_signature;

        document.getElementById("payment-form").submit();
      },
      modal: {
        ondismiss: function () {
          window.location.href = "/signup"; 
        }
      }
    };
    const rzp = new Razorpay(options);
    window.onload = () => {
      rzp.open();
    };
  </script>
</body>
</html>
